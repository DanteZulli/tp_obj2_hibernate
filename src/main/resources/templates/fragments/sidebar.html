<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
  <!-- Fragmento unificado del sidebar con lÃ³gica basada en roles -->
  <div th:fragment="sidebar-unified">
    <!-- Extraer el primer rol de la lista de authorities -->
    <div th:with="primaryRole=${#authentication.authorities.toArray()[0].authority}">
      
      <!-- Sidebar para ADMIN -->
      <div th:if="${primaryRole == 'ROLE_ADMIN'}" 
           th:replace="~{fragments/sidebar-admin.html}"></div>
      
      <!-- Sidebar para TECNICO -->
      <div th:if="${primaryRole == 'ROLE_TECNICO'}" 
           th:replace="~{fragments/sidebar-tecnico.html}"></div>
      
      <!-- Sidebar para CLIENTE -->
      <div th:if="${primaryRole == 'ROLE_CLIENTE'}" 
           th:replace="~{fragments/sidebar-cliente.html}"></div>
    </div>
  </div>
</body>
</html> 